{"remainingRequest":"D:\\project\\xiaozhuxiaoniu\\xiaofeiniu-admin-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\xiaozhuxiaoniu\\xiaofeiniu-admin-master\\src\\views\\CategoryList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\xiaozhuxiaoniu\\xiaofeiniu-admin-master\\src\\views\\CategoryList.vue","mtime":1549876497000},{"path":"D:\\project\\xiaozhuxiaoniu\\xiaofeiniu-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\xiaozhuxiaoniu\\xiaofeiniu-admin-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\project\\xiaozhuxiaoniu\\xiaofeiniu-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\xiaozhuxiaoniu\\xiaofeiniu-admin-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  data(){\n    return {\n      categoryList:[]\n    }\n  },\n  methods:{\n    deleteCategory(c,i){\n      this.$confirm('删除操作不可撤销!您确定吗?','提示',{type:'warning'}).then(()=>{\n         var url=this.$store.state.globalSettings.apiUrl + '/admin/category/'+c.cid;\n          this.$axios.delete(url).then((res)=>{\n        if(res.data.code==200){//数据库删除成功\n          this.categoryList.splice(i, 1);  //从模型数据中删除\n          this.$message.success('菜品类删除成功!');\n        }else{\n          this.$message.error('类别删除出错了:'+res.data.msg);\n        }\n      }).catch((err)=>{\n        console.log(err);\n      })\n      }).catch(()=>{\n\n      })\n    },\n    updateCategory(c,i) {\n      console.log(i);\n    },\n    addCategory(){\n      this.$prompt('请输入新的菜品类别名:','提示',{type:'info'}).then(({value})=>{\n        //获得用户的输入,调用数据API添加到数据库\n        var url=this.$store.state.globalSettings.apiUrl + '/admin/category';\n        this.$axios.post(url,{cname:value}).then((res)=>{\n          if(res.data.code==200){\n            //数据库中添加成功\n            this.$message.success('新的类别添加成功')\n            //模型数据中添加新的类别\n            this.categoryList.push({cid:res.data.cid,cname:value})\n          }else{\n            this.$message.error('新的类别添加出错: '+res.data.msg)\n          }\n        }).catch((err)=>{\n          console.log(err)\n        })\n      }).catch(()=>{\n\n      })\n    }\n  },\n  mounted(){\n    var url=this.$store.state.globalSettings.apiUrl + '/admin/category';\n    this.$axios.get(url).then((res)=>{\n      this.categoryList=res.data;\n    }).catch((err)=>{\n      console.log(err);\n    })\n  } \n}\n",{"version":3,"sources":["CategoryList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CategoryList.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"xfn-category\">\n    <el-breadcrumb>\n      <el-breadcrumb-item to=\"/main\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>菜品类别管理</el-breadcrumb-item>\n      <el-breadcrumb-item>类别列表</el-breadcrumb-item>\n    </el-breadcrumb>\n   <br>\n    <el-button type='primary' @click=\"addCategory\">添加新的菜品类别</el-button>\n  <br>\n    <el-table :data='categoryList'  stripe border>\n         <el-table-column label='编号' prop='cid'> </el-table-column>\n         <el-table-column label='名称' prop='cname'> </el-table-column>\n         <el-table-column label='操作' > \n           <template slot-scope=\"{row,$index}\">\n              <el-button @click='updateCategory(row,$index)' type='success' size='mini'>修改</el-button>\n              <el-button @click=\"deleteCategory(row,$index)\" type='danger' size='mini'>删除</el-button>\n           </template>\n         </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nexport default {\n  data(){\n    return {\n      categoryList:[]\n    }\n  },\n  methods:{\n    deleteCategory(c,i){\n      this.$confirm('删除操作不可撤销!您确定吗?','提示',{type:'warning'}).then(()=>{\n         var url=this.$store.state.globalSettings.apiUrl + '/admin/category/'+c.cid;\n          this.$axios.delete(url).then((res)=>{\n        if(res.data.code==200){//数据库删除成功\n          this.categoryList.splice(i, 1);  //从模型数据中删除\n          this.$message.success('菜品类删除成功!');\n        }else{\n          this.$message.error('类别删除出错了:'+res.data.msg);\n        }\n      }).catch((err)=>{\n        console.log(err);\n      })\n      }).catch(()=>{\n\n      })\n    },\n    updateCategory(c,i) {\n      console.log(i);\n    },\n    addCategory(){\n      this.$prompt('请输入新的菜品类别名:','提示',{type:'info'}).then(({value})=>{\n        //获得用户的输入,调用数据API添加到数据库\n        var url=this.$store.state.globalSettings.apiUrl + '/admin/category';\n        this.$axios.post(url,{cname:value}).then((res)=>{\n          if(res.data.code==200){\n            //数据库中添加成功\n            this.$message.success('新的类别添加成功')\n            //模型数据中添加新的类别\n            this.categoryList.push({cid:res.data.cid,cname:value})\n          }else{\n            this.$message.error('新的类别添加出错: '+res.data.msg)\n          }\n        }).catch((err)=>{\n          console.log(err)\n        })\n      }).catch(()=>{\n\n      })\n    }\n  },\n  mounted(){\n    var url=this.$store.state.globalSettings.apiUrl + '/admin/category';\n    this.$axios.get(url).then((res)=>{\n      this.categoryList=res.data;\n    }).catch((err)=>{\n      console.log(err);\n    })\n  } \n}\n</script>"]}]}